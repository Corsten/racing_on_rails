include_partial "fixtures"

open "/"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/schedule"
assert_text_present "regex:Schedule|Calendar"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/schedule/list"
assert_text_present "regex:Schedule|Calendar"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/schedule/cyclocross"
assert_text_present "regex:Schedule|Calendar"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/schedule/list/cyclocross"
assert_text_present "regex:Schedule|Calendar"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/results"
assert_text_present "regex:Events|Results"
assert_text_present "#{Date.today.year}"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/results/2004/road"
assert_text_present "Kings Valley"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

click_and_wait "link=Kings Valley Road Race"
assert_text_present "Kings Valley Road Race"
assert_text_present "December 31, 2004"
assert_text_present "Senior Women 1/2/3"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

click_and_wait "link=Pennington"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

assert_table "css=table.racer_results", 1, 0, "2"
assert_table "css=table.racer_results", 1, 1, "Kings Valley Road Race"
assert_table "css=table.racer_results", 1, 2, "Senior Women 1/2/3"
assert_table "css=table.racer_results", 1, 3, "12/31/2004"

click_and_wait "link=Jack Frost"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"
assert_text_present "Jack Frost"
assert_text_present "January 17, 2002"
assert_text_present "Weaver"
assert_text_present "Pennington"

open "/ironman"
assert_text_present "Ironman"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/rider_rankings"
assert_text_present "No results for #{Date.today.year}"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/cat4_womens_race_series"
assert_text_present "No results for #{Date.today.year}"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/oregon_cup"
assert_text_present "Oregon Cup"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/teams"
assert_text_present "Teams"
assert_text_present "Vanilla"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/teams/#{Team.find_by_name('Vanilla').id}"
assert_text_present "Vanilla"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/track"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"

open "/track/schedule"
assert_text_not_present "regexp:Template is missing|Unknown action|Routing Error|RuntimeError|error occurred|Application Trace|RecordNotFound"
assert_not_title "regexp:Exception"
