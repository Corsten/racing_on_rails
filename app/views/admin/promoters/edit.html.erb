<% @page_title = "Admin: Promoters: #{@promoter.name}" %>

<%- if @event -%>
  <p class="top-margin centered">
    <%= link_to("Back to #{@event.name}", edit_admin_event_promoter_path(@promoter, @event)) unless @promoter.new_record? %>
    <%= link_to("Back to #{@event.name}", edit_admin_event_path(@event)) if @promoter.new_record? %>
  </p>
<% end -%>

<%= error_messages_for :promoter %>

<h2><%= @promoter.name %></h2>

<% form_for([:admin, @promoter]) do |f| %>
<div class="column_grid_container">
  <div class="span-3">
    <%= f.labelled_text_field :name %>
    <%= f.labelled_text_field :email %>
    <%= f.labelled_text_field :phone %>
  </div>
  <% table :caption => "Events", :class => "box-3 last no_top_margin" do %>
    <tr>
      <th>Date</th>
      <th>Name</th>
    </tr>
    <%= render :partial => "event", :collection => @promoter.events.sort_by(&:date).reverse %>
  <% end -%>

  <div class="page_buttons clear span-6 last">
    <div class="updatedon span-3"><%= "Updated: #{time_ago_in_words(@promoter.updated_at, true)} ago" unless @promoter.updated_at.nil? %></div>
    <div class="right span-3 last">
      <%= submit_tag "Save", :id => "save" %>
    </div>
  </div>
</div>

  <%= hidden_field_tag('event_id', @event.id) if @event %>

<% end -%>
